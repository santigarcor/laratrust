(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{300:function(t,e,a){"use strict";a.r(e);var l=a(0),s=Object(l.a)({},(function(){this._self._c;return this._m(0)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"upgrade-from-7-x-to-8-x"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#upgrade-from-7-x-to-8-x"}},[t._v("#")]),t._v(" Upgrade from 7.x to 8.x")]),t._v(" "),e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("IMPORTANT")]),t._v(" "),e("p",[t._v("Laratrust 8.x requires Laravel 10.x")])]),t._v(" "),e("p",[t._v("In order to upgrade from Laratrust 7.x to 8.x you have to follow these steps:")]),t._v(" "),e("ol",[e("li",[t._v("Change your "),e("code",[t._v("composer.json")]),t._v(" to require the 8.x version of Laratrust:")])]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"santigarcor/laratrust"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^8.0"')]),t._v("\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[e("p",[t._v("Run "),e("code",[t._v("composer update")]),t._v(" to update the source code.")])]),t._v(" "),e("li",[e("p",[t._v("Run "),e("code",[t._v("php artisan config:clear")]),t._v(", "),e("code",[t._v("php artisan cache:clear")]),t._v(" and "),e("code",[t._v("php artisan view:clear")]),t._v(".")])]),t._v(" "),e("li",[e("p",[t._v("Update your "),e("code",[t._v("config/laratrust.php")]),t._v(":")]),t._v(" "),e("p",[t._v("4.1. Backup your "),e("code",[t._v("config/laratrust.php")]),t._v(" configuration values.")]),t._v(" "),e("p",[t._v("4.2. Delete the "),e("code",[t._v("config/laratrust.php")]),t._v(" file.")]),t._v(" "),e("p",[t._v("4.3. Run "),e("code",[t._v("php artisan vendor:publish --tag=laratrust")]),t._v(".")]),t._v(" "),e("p",[t._v("4.4. Update the "),e("code",[t._v("config/laratrust.php")]),t._v(" file with your old values.")])]),t._v(" "),e("li",[e("p",[t._v("The ownership feature has been completely removed. Then migrate that code.")])]),t._v(" "),e("li",[e("p",[t._v("The methods "),e("code",[t._v("isA")]),t._v(" and "),e("code",[t._v("isAn")]),t._v(" have been removed, replace with "),e("code",[t._v("hasRole")]),t._v(".")])]),t._v(" "),e("li",[e("p",[t._v("The user model now must implement the "),e("code",[t._v("Laratrust\\Contracts\\LaratrustUser")]),t._v(" interface and use the "),e("code",[t._v("Laratrust\\Traits\\HasRolesAndPermissions")]),t._v(" trait.")])]),t._v(" "),e("li",[e("p",[t._v("The "),e("code",[t._v("Role")]),t._v(", "),e("code",[t._v("Permission")]),t._v(" and "),e("code",[t._v("Team")]),t._v(" models should inherit now from the following classes:")])])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("Old")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("New")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("Laratrust\\Models\\LaratrustRole")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("Laratrust\\Models\\Role")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("Laratrust\\Models\\LaratrustPermission")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("Laratrust\\Models\\Permission")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("Laratrust\\Models\\LaratrustTeam")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("Laratrust\\Models\\Team")])])])])]),t._v(" "),e("ol",{attrs:{start:"9"}},[e("li",[t._v("The methods signatures have been changed. Follow this table to migrate them.")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("Old")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("New")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("attachPermission")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("givePermission")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("attachPermissions")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("givePermissions")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("detachPermission")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("removePermission")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("detachPermissions")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("removePermissions")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("attachRole")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("addRole")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("detachRole")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("removeRole")])])])])]),t._v(" "),e("ol",{attrs:{start:"10"}},[e("li",[t._v("The methods signatures for the events have been changed. Follow this table to migrate them.")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("Old")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("New")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("roleAttached")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("roleAdded")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("roleDetached")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("roleRemoved")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("permissionAttached")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("permissionAdded")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("permissionDetached")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("permissionRemoved")])])])])]),t._v(" "),e("ol",{attrs:{start:"11"}},[e("li",[t._v("The Querying relation signatures have been changed. Follow this table to migrate them.")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("Old")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("New")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("whereRoleIs")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("whereHasRole")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("orWhereRoleIs")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("orWhereHasRole")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("wherePermissionIs")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("whereHasPermission")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("orWherePermissionIs")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("orWhereHasPermission")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("whereDoesntHaveRole")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("whereDoesntHaveRoles")])])])])]),t._v(" "),e("p",[t._v("Now you can use the 8.x version without any problem.")])])}],!1,null,null,null);e.default=s.exports}}]);